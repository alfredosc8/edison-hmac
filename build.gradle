apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'signing'
apply plugin: 'maven'

version='0.1.0'
group='de.otto.edison'

buildscript {
    ext.springBootVersion = "1.3.3.RELEASE"
}

repositories {
    mavenCentral()
    maven { url "http://nexus.lhotse.ov.otto.de:8080/content/groups/public" }
    maven { url "https://oss.sonatype.org/content/repositories/releases/" }
    maven { url "https://oss.sonatype.org/content/repositories/snapshots/" }
}

dependencies {
    compile "de.otto:hmac-auth-server:1.2.8"
    compile "com.google.code.gson:gson:2.6.2"

    testCompile 'org.springframework:spring-test:4.0.6.RELEASE'
    testCompile "org.testng:testng:6.9.9"
    testCompile "org.mockito:mockito-core:1.10.19"
    testCompile "org.hamcrest:hamcrest-core:1.3"
    testCompile "org.hamcrest:hamcrest-library:1.3"
}

test {
    useTestNG()
    println()
}

idea.project {
    jdkName = "1.8"
    languageLevel = "1.8"
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.8'
}

task sourcesJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

artifacts {
    archives sourcesJar
    archives javadocJar
}
